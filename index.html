<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HCP Directory ‚Äî Loop and Learn</title>
    <link rel="icon" type="image/svg+xml" href="assets/logo-ring.svg" />
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/hcp.css" />
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  </head>
  <body>

    <main class="container">
      <article id="content" class="content">
        <section class="content-section">
          <div class="page-header">
            <h1>Healthcare Provider Directory</h1>
            <div class="text-content">
              <p>Find Loop-friendly healthcare providers around the world. Click on a country to see available providers in that region.</p>
              
              <div class="color-guide">
                <h3>üé® Color Guide</h3>
                <div class="color-guide-grid">
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #e5e7eb;"></div>
                    <span class="color-label">No Providers</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #bbf7d0;"></div>
                    <span class="color-label">Limited (1-2)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #86efac;"></div>
                    <span class="color-label">Some (3-5)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #4ade80;"></div>
                    <span class="color-label">Good (6-10)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #22c55e;"></div>
                    <span class="color-label">Excellent (11-20)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #16a34a;"></div>
                    <span class="color-label">Very Good (21-50)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #15803d;"></div>
                    <span class="color-label">Outstanding (51-100)</span>
                  </div>
                  <div class="color-guide-item">
                    <div class="color-indicator" style="background-color: #14532d;"></div>
                    <span class="color-label">Exceptional (100+)</span>
                  </div>
                </div>
              </div>
            </div>
          
          <!-- Navigator Section -->
          <div class="hcp-navigator">
            <div class="navigator-controls">
              <div class="search-box">
                <input type="text" id="countrySearch" placeholder="Search countries..." />
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
              </div>
              
              <button id="resetFilters" class="reset-btn">Clear Search</button>
            </div>
            
            <div class="stats-summary">
              <div class="stat-item">
                <span class="stat-number" id="totalCountries">0</span>
                <span class="stat-label">Countries</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="totalProviders">0</span>
                <span class="stat-label">Providers</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="activeCountries">0</span>
                <span class="stat-label">Active</span>
              </div>
            </div>
          </div>
          </div>
          
          <!-- Map Container -->
          <div class="map-container">
            <div id="hcpMap" class="hcp-map"></div>
          </div>
          
          <!-- Countries List -->
          <div class="countries-list-section">
            <h3>üåç Countries with Healthcare Providers</h3>
            <div class="countries-grid" id="countriesGrid">
              <!-- Countries will be populated here -->
            </div>
          </div>

          <!-- HCP List Container -->
          <div class="hcp-list-container" id="hcpListContainer" style="display: none;">
            <div class="hcp-list-header">
              <h2 id="countryTitle">Healthcare Providers</h2>
              <button class="close-btn" id="closeHcpList">√ó</button>
            </div>
            <div class="hcp-search-container">
              <div class="hcp-search-box">
                <input type="text" id="hcpSearch" placeholder="Search by name, specialty, city, hospital..." />
                <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35"/>
                </svg>
              </div>
              <button id="clearHcpSearch" class="clear-hcp-search-btn">Clear</button>
            </div>
            <div class="hcp-list" id="hcpList">
              <!-- HCP items will be populated here -->
            </div>
          </div>
          
          <!-- Add Provider (opens modal) -->
          <div class="countries-list-section">
            <button id="openDemoModal" class="btn btn-primary add-provider-btn">
              <svg aria-hidden="true" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" focusable="false">
                <path d="M12 5c.552 0 1 .448 1 1v5h5c.552 0 1 .448 1 1s-.448 1-1 1h-5v5c0 .552-.448 1-1 1s-1-.448-1-1v-5H6c-.552 0-1-.448-1-1s.448-1 1-1h5V6c0-.552.448-1 1-1z"/>
              </svg>
              <span>Add a Provider</span>
            </button>
          </div>
        </section>
      </article>
    </main>


    <!-- HCP Detail Modal -->
    <div class="hcp-modal" id="hcpModal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Provider Details</h3>
          <button class="close-btn" id="closeModal">√ó</button>
        </div>
        <div class="modal-body" id="modalBody">
          <!-- Provider details will be populated here -->
        </div>
      </div>
    </div>

    <!-- Demo Modal (Form inside modal) -->
    <div class="hcp-modal" id="demoModal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Add a Provider</h3>
          <button class="close-btn" id="closeDemoModal">√ó</button>
        </div>
        <div class="modal-body">
          <iframe
            src="https://docs.google.com/forms/d/e/1FAIpQLSfWwVdhqpsk46xifo2etJJhw55vcHMs5IktSVNRIOmVi1CXfg/viewform?embedded=true"
            frameborder="0"
            marginheight="0"
            marginwidth="0"
            loading="lazy"
            style="width: 100%; height: 75vh; border: 0; display: block;"
          >Loading‚Ä¶</iframe>
        </div>
      </div>
    </div>


    <!-- Scripts -->
    <script src="js/countries.js"></script>
    <script src="js/hcp-data.js"></script>
    <script src="js/hcp-map.js"></script>
    <script src="js/hcp-page.js"></script>
    <script>
      (function() {
        const openBtn = document.getElementById('openDemoModal');
        const demoModal = document.getElementById('demoModal');
        const closeBtn = document.getElementById('closeDemoModal');
        if (openBtn && demoModal && closeBtn) {
          openBtn.addEventListener('click', () => { demoModal.style.display = 'flex'; });
          closeBtn.addEventListener('click', () => { demoModal.style.display = 'none'; });
          demoModal.addEventListener('click', (e) => { if (e.target === demoModal) demoModal.style.display = 'none'; });
          document.addEventListener('keydown', (e) => { if (e.key === 'Escape') demoModal.style.display = 'none'; });
        }
      })();
    </script>
  </body>
</html>
